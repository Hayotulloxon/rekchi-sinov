<!doctype html>
<html lang="uz">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>RekchiAi olmoslari</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="background:black; color:white; text-align:center; padding:50px 20px;">
    
    <!-- STOP xabari -->
    <div id="stop-message">
        <h1 style="font-size:32px; color:red; margin-bottom:20px;">â›”</h1>
        <h2 style="font-size:24px; margin-bottom:10px;">Mini appdan chiqib kiring</h2>
        <p style="margin-bottom:30px; opacity:0.8;">Dastur vaqtincha yopildi</p>
        
        <button onclick="closeApp()" 
                style="padding:15px 30px; background:#0088cc; color:white; border:none; border-radius:10px; font-size:16px;">
            Chiqish
        </button>
        
        <p style="margin-top:20px; font-size:12px; opacity:0.6;">
            Sahifa avtomatik yangilanadi
        </p>
    </div>
    
    <!-- Asosiy app (yashirin) -->
    <div id="main-app" style="display:none;">
        <!-- Bu yerda sizning asosiy app kodingiz -->
    </div>

<script>
// Telegram Web Appni yopish
function closeApp() {
    if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.close();
    }
}

// GitHubdan tekshirish
async function checkGitHub() {
    try {
        const response = await fetch("https://yourgithub.github.io/stop.json?t=" + Date.now());
        const data = await response.json();
        
        // Agar stop=true bo'lsa
        if (data.stop === true) {
            // STOP xabarini ko'rsatish
            document.getElementById('stop-message').style.display = 'block';
            document.getElementById('main-app').style.display = 'none';
            
            // 30 soniyadan keyin avtomatik yangilash
            setTimeout(() => {
                location.reload();
            }, 30000);
            
            return true;
        }
        return false;
    } catch (error) {
        return false;
    }
}

// Dasturni boshlash
async function startApp() {
    // GitHubni tekshirish
    const stopped = await checkGitHub();
    
    // Agar to'xtatilmagan bo'lsa
    if (!stopped) {
        // Asosiy appni ko'rsatish
        document.getElementById('stop-message').style.display = 'none';
        document.getElementById('main-app').style.display = 'block';
        
        // Sizning asosiy app kodingizni ishga tushiring
        // ...
        
        // Har 60 soniyada GitHubni tekshirish
        setInterval(checkGitHub, 60000);
    }
}

// Sahifa yuklanganda boshlash
window.onload = startApp;
</script>

</body>
</html>
